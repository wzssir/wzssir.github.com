<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="viewport" content="width=320">
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
	*{
		margin: 0;
		padding: 0;
		list-style: none;
	}
	html,body{
		height: 100%;
		overflow: hidden;
	}
	#box{
		width: 100%;
		height: 200px;
		overflow: hidden;
	}
	#pic{
		width: 600%;
		height: 100%;
		display: -webkit-box;

	}
	#pic li{
		-webkit-box-flex:1;
		height: 100%;
	}
	#pic li img{
		width: 100%;
		height: 100%;
	}
	</style>
	<script>
		window.addEventListener('DOMContentLoaded',function(){
			var oP=document.getElementById('pic');
			var aLi=oP.children;
			var iNow=1;
			var timer=null;
			var x=-aLi[0].offsetWidth*iNow;
			oP.style.WebkitTransform='translateX('+x+'px)';
			var bOK=false;
			oP.addEventListener('touchstart',function(ev){
				clearInterval(timer)
				if(bOK)return;
					bOK=true;
				oP.style.WebkitTransition='none';
				var start=ev.targetTouches[0].pageX;
				var disX=start-x;
				
				function move(ev){
					
					x=ev.targetTouches[0].pageX-disX;
					oP.style.WebkitTransform='translateX('+x+'px)';
				}
				function end(ev){
					
					document.removeEventListener('touchend',end,false);
					document.removeEventListener('touchmove',move,false);

					if(Math.abs(start-ev.changedTouches[0].pageX)>50){
						if(start-ev.changedTouches[0].pageX>0){
							iNow++;
							if(iNow==aLi.length){
								iNow=aLi.length-1
							}
							oP.style.WebkitTransition='0.5s all linear';
							x=-iNow*aLi[0].offsetWidth;
							oP.style.WebkitTransform='translateX('+x+'px)';
						}else{
							iNow--;
							if(iNow==-1){
								iNow=0;
							}
							oP.style.WebkitTransition='0.5s all linear';
							x=-iNow*aLi[0].offsetWidth;
							oP.style.WebkitTransform='translateX('+x+'px)';
						}
					}else{
							oP.style.WebkitTransition='0.5s all linear';
							x=-iNow*aLi[0].offsetWidth;
							oP.style.WebkitTransform='translateX('+x+'px)';
					}
					timer=setInterval(function(){
						iNow++;
						if(iNow==aLi.length){
							iNow=1;
						}
						oP.style.WebkitTransition='0.5s all linear';
						x=-iNow*aLi[0].offsetWidth;
						oP.style.WebkitTransform='translateX('+x+'px)';
					},1000)
				}
				document.addEventListener('touchmove',move,false);
				document.addEventListener('touchend',end,false)
				ev.preventDefault();
			},false)

			oP.addEventListener('transitionend',function(){
				bOK=false;
				if(iNow==aLi.length-1){
					iNow=1
				}
				if(iNow==0){
					iNow=aLi.length-2;
				}
				oP.style.WebkitTransition='none';
				x=-iNow*aLi[0].offsetWidth;
				oP.style.WebkitTransform='translateX('+x+'px)';
			},false)
				timer=setInterval(function(){
					iNow++;
					if(iNow==aLi.length){
						iNow=1;
					}
					oP.style.WebkitTransition='0.5s all linear';
					x=-iNow*aLi[0].offsetWidth;
					oP.style.WebkitTransform='translateX('+x+'px)';
				},1000)
		},false)
	</script>
</head>
<body>
	<div id="box">
		<ul id="pic">
			<li><img src="img/3.jpg" alt=""></li>
			<li><img src="img/0.jpg" alt=""></li>
			<li><img src="img/1.jpg" alt=""></li>
			<li><img src="img/2.jpg" alt=""></li>
			<li><img src="img/3.jpg" alt=""></li>
			<li><img src="img/0.jpg" alt=""></li>
		</ul>
	</div>
</body>
</html>